"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("path"),n=require("fs"),P=require("node:module"),F=P.createRequire(typeof document>"u"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.cjs",document.baseURI).href),r=t.sep,{cwd:h}=process,Z={enabled:!0,folderPath:t.join(h(),"/dist"),outPath:t.resolve(h()),zipName:"",deleteFolder:!1},z=v=>{let g={...Z,...v},{enabled:f,folderPath:c,outPath:s,zipName:o,deleteFolder:b}=g;if(f=Boolean(f),!c||!s)throw new Error("config.folderPath and config.outPath is required.");c=t.resolve(c),s=t.resolve(s),o=o||c.split(r).pop()+".zip";const j=()=>{const q=F("jszip"),p=new q,a=function(e,i,l=""){const d=n.readdirSync(i);l+=i.split(r).pop()+r,d.forEach(m=>{const u=t.join(i,r,m);n.statSync(u).isDirectory()?a(e,u,l):e.file(l+m,n.readFileSync(u))})},y=(e=o)=>{const i=t.join(s,r+e);n.existsSync(i)&&n.unlinkSync(i)},S=e=>{n.readdirSync(e).forEach(l=>{const d=e+r+l;n.statSync(d).isDirectory()?S(d):n.unlinkSync(d)}),n.rmdirSync(e)},w=function(){a(p,c),p.generateAsync({type:"nodebuffer",compression:"DEFLATE",compressionOptions:{level:9}}).then(e=>{y(o),n.writeFileSync(t.join(s,r,o),e),b&&S(c)})};y(o),w()};return{name:"vite-plugin-zip-file",apply:"build",closeBundle(){f&&j()}}};exports.viteZip=z;
