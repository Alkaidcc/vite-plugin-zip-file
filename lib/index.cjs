"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const v=require("path"),g=require("fs"),j=require("node:module"),m=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},r=m(v),i=m(g),q=j.createRequire(typeof document>"u"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.cjs",document.baseURI).href),b=(e={folderPath:null,outPath:null,zipName:null})=>{let{folderPath:l,outPath:u,zipName:t}=e;if(!l||!u)throw new Error("config.folderPath and config.outPath is required.");l=r.default.resolve(l),u=r.default.resolve(u),t=t||l.split("/").pop()+".zip";const y=()=>{const h=q("jszip"),f=new h,a=function(n,o,c=""){const _=i.default.readdirSync(o);c+=o.split("/").pop()+"/",_.forEach(p=>{const s=r.default.join(o,"/",p);i.default.statSync(s).isDirectory()?a(n,s,c):n.file(c+p,i.default.readFileSync(s))})},d=(n=t)=>{const o=r.default.join(u,"/"+n);i.default.existsSync(o)&&i.default.unlinkSync(o)},S=function(){a(f,l),f.generateAsync({type:"nodebuffer",compression:"DEFLATE",compressionOptions:{level:9}}).then(n=>{d(t),i.default.writeFileSync(r.default.join(u,"/",t),n)})};d(t),S()};return{name:"vite-plugin-zip-file",apply:"build",closeBundle(){y()}}};exports.viteZip=b;
