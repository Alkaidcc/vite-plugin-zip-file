"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const v=require("path"),j=require("fs"),g=require("node:module"),m=e=>e&&typeof e=="object"&&"default"in e?e:{default:e},r=m(v),i=m(j),q=g.createRequire(typeof document>"u"?new(require("url")).URL("file:"+__filename).href:document.currentScript&&document.currentScript.src||new URL("index.cjs.js",document.baseURI).href),b=(e={folderPath:null,outPath:null,zipName:null})=>{let{folderPath:l,outPath:u,zipName:t}=e;if(!l||!u)throw new Error("config.folderPath and config.outPath is required.");l=r.default.resolve(l),u=r.default.resolve(u),t=t||l.split("/").pop()+".zip";const y=()=>{const h=q("jszip"),a=new h,d=function(n,o,s=""){const _=i.default.readdirSync(o);s+=o.split("/").pop()+"/",_.forEach(p=>{const c=r.default.join(o,"/",p);i.default.statSync(c).isDirectory()?d(n,c,s):n.file(s+p,i.default.readFileSync(c))})},f=(n=t)=>{const o=r.default.join(u,"/"+n);i.default.existsSync(o)&&i.default.unlinkSync(o)},S=function(){d(a,l),a.generateAsync({type:"nodebuffer",compression:"DEFLATE",compressionOptions:{level:9}}).then(n=>{f(t),i.default.writeFileSync(r.default.join(u,"/",t),n)})};f(t),S()};return{name:"vite-plugin-zip",apply:"build",closeBundle(){y()}}};exports.viteZip=b;
